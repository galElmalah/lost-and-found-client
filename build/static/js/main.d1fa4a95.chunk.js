(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{146:function(e,t,a){e.exports={colorPicker:"FilterList_colorPicker__297p-",filtersCon:"FilterList_filtersCon__w-YBY"}},21:function(e,t,a){e.exports={defualt:"Drawer_defualt__3MV2D",animate:"Drawer_animate__1JFBp",matchPanel:"Drawer_matchPanel__1ukRD",match:"Drawer_match__WHS1c",matchContainer:"Drawer_matchContainer__3OJ0S",settingsPanel:"Drawer_settingsPanel__G5oZX",userDetails:"Drawer_userDetails__2P22M",avatar:"Drawer_avatar__oKW-x",editIcon:"Drawer_editIcon__1KRz7",chip:"Drawer_chip__18aqu",found:"Drawer_found__3mDmB",scoreLabel:"Drawer_scoreLabel__265b-",matchLabels:"Drawer_matchLabels__RI6i9",flex:"Drawer_flex__2lH5e",email:"Drawer_email__3QvJt",matcheNo:"Drawer_matcheNo__3Oqp3",l:"Drawer_l__2yTIg",matches:"Drawer_matches__MXhU1",title:"Drawer_title__2GcSb",gradient:"Drawer_gradient__175L8"}},237:function(e,t,a){e.exports=a(431)},242:function(e,t,a){},243:function(e,t,a){},266:function(e,t,a){},43:function(e,t,a){e.exports={actionsBar:"ActionsBar_actionsBar__nWlU6",modal:"ActionsBar_modal__3QZq_",modalContent:"ActionsBar_modalContent__31qLR",form:"ActionsBar_form__23ZNl",btns:"ActionsBar_btns__JAKoj",btn:"ActionsBar_btn__2iXtv"}},430:function(e,t,a){},431:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),c=a.n(l),o=(a(242),a(8)),i=(a(243),a(3)),s=a(54),u=a(507),m=a(511),d=a(475),f=a(513),p=a(14),E=a(15),h=a(109),g=a.n(h),b=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return t}})),r=Object(o.a)(a,2),l=r[0],c=r[1];return[l,function(t){try{var a=t instanceof Function?t(l):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){}}]},v=n.createContext({userDetails:{},setUserDetails:function(){throw new Error("ho shit renderd outside of a provider")}}),O={initialData:null,invokeManually:!1,data:{},method:"get"},C=function(e,t,a){var n="https://school-lost-and-found-app.herokuapp.com"+e;return"get"===t.toLowerCase()?"".concat(n,"?userId=").concat(a):n},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.name?Object(E.a)({},e,{user:t}):e},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,a=Object(E.a)({},O,{},t),r=a.data,l=a.method,c=a.initialData,i=a.invokeManually,s=Object(n.useContext)(v),u=s.userDetails,m=Object(n.useState)(!0),d=Object(o.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)(!1),b=Object(o.a)(h,2),_=b[0],y=b[1],k=Object(n.useState)(c),w=Object(o.a)(k,2),S=w[0],D=w[1],x=j(r,u),N=Object(n.useCallback)((function(t,a){return console.log(a),g.a.request({url:C(a||e,l,u.googleId),method:l,data:t?j(t,u):x})}),[l,e,x,u]);return Object(n.useEffect)((function(){i||N().then((function(e){var t=e.data;return D(t),t})).catch(y).finally((function(){return p(!1)}))}),[]),{isFetching:f,data:S,hasError:_,callApi:N,setData:D}},y=window.L,k=new y.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),w=(new y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),new y.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})),S=[{name:"default",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"Brush",url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.js"},{name:"world image",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}],D=Object(n.createContext)(),x=a(53),N=function(){var e=Object(n.useContext)(D),t=e.initialPosition,a=e.markers,l=e.center,c=e.draggableMarkerPosition,o=e.updateDraggableMarker,i=e.refmarker,p=e.tileUrl;if(!Object(n.useContext)(v).userDetails.name)return r.a.createElement(x.a,{to:"/"});return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(u.a,{className:s.map,center:c||l||t,zoom:12,dragging:!0},r.a.createElement(m.a,{url:p}),a.map(A),c&&r.a.createElement(d.a,{className:s.dragMarker,draggable:!0,onDragend:o,position:c,ref:i},r.a.createElement(f.a,null,"Draggable marker"))))},A=function(e){var t=e.location,a=(e.name,e.lostOrFoundAt),n=e.description,l=e.entryType,c=(e.type,e._id),o=e.color,u=e.labels,m=Object(i.a)(e,["location","name","lostOrFoundAt","description","entryType","type","_id","color","labels"]),p={color:o,backgroundColor:o,height:"17px",width:"70%",position:"relative",top:"4px"};return r.a.createElement(d.a,{key:c,position:t,icon:"found"===l?k:w},r.a.createElement(f.a,null,r.a.createElement("span",{className:s.popoverContainer},r.a.createElement("p",{className:s.descriptionItem},n),r.a.createElement("p",{className:s.informationItem},r.a.createElement("span",null,"Date:"),a.substring(0,10)),r.a.createElement("p",{className:s.informationItem},r.a.createElement("span",null,"Category:"),u.join(", ")),r.a.createElement("p",{className:s.informationItem},r.a.createElement("span",null,"By:"),m.reporter.name),o&&r.a.createElement("p",{className:s.informationItem},r.a.createElement("span",null,"Color:"),r.a.createElement("span",{clasName:s.colorItem,style:p})))))},M=a(43),I=a(482),T=a(438),B=a(485),L=a(500),F=a(28),P=a(434),U=a(506),W=a(504),z=a(481),R=a(119),H=(a(266),a(200)),G=function(e){var t=e.handleChangeComplete,a=void 0===t?console.log:t,r=e.className,l=e.width,c=void 0===l?"276px":l;return n.createElement(H.TwitterPicker,{className:r,triangle:"hide",onChangeComplete:a,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF","#795548","#000000"],width:c})};function J(e){return r.a.createElement("button",{onClick:e.clickHandler,className:M.btn},e.text)}var q=a(483),V=a(501),K=a(480),Z=a(476),X=a(512),Y=a(6),Q=a(21),$=a(510),ee=a(146),te=a(143),ae=a.n(te),ne=a(493),re=a(508),le=a(489),ce=a(432),oe=a(514),ie=a(495),se=a(496),ue=a(484),me=a(90),de=a(518),fe=a(494),pe=a(490),Ee=a(147),he=a.n(Ee),ge=a(87),be=a.n(ge),ve=a(202),Oe=a.n(ve),Ce=a(203),je=a.n(Ce),_e=a(497),ye=a(205),ke=a.n(ye),we=a(204),Se=a.n(we),De=a(519),xe=function(e){var t=e.isOpen,a=e.handleClose,n=e.entryType,l=e.id;return r.a.createElement(Ye,{isOpen:t,handleClose:a},r.a.createElement(Ne,{id:l,title:"found"===n?"Found Something":"Lost Something",entryType:n,handleClose:a}))},Ne=function(e){var t=e.id,a=(e.entryType,e.handleClose),l=e.title;console.log({handleClose:a});var c=Object(n.useContext)(v).labels,i=_("",{invokeManually:!0}).callApi,s=_("",{invokeManually:!0,method:"put"}).callApi,u=r.a.useContext(bt).showAlert,m=Object(n.useContext)(D),d=m.enableDraggableMarker,f=(m.disableDraggableMarker,m.addMarker,m.initialPosition,m.refreshMarkers),p=m.draggableMarkerPosition,h=Object(n.useState)(!p),g=Object(o.a)(h,2),b=g[0],O=g[1],C=r.a.useState(null),j=Object(o.a)(C,2),y=j[0],k=j[1],w=r.a.useState(""),S=Object(o.a)(w,2),x=S[0],N=S[1],A=r.a.useState(""),T=Object(o.a)(A,2),B=T[0],P=T[1],H=Object(n.useState)(new Date),J=Object(o.a)(H,2),Y=J[0],Q=J[1],$=r.a.useState(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState(""),re=Object(o.a)(ne,2),le=re[0],ce=re[1];r.a.useEffect((function(){i({},"/items/".concat(t)).then((function(e){var t=e.data;k(t),N(t.name),ae(t.description),ce(t.color),P(t.labels[0]||""),Q(t.lostOrFoundAt)}))}),[]);return r.a.createElement("div",{className:M.modalContent},r.a.createElement("h2",null,l),r.a.createElement("form",{className:M.form,noValidate:!0,autoComplete:"off"},b?r.a.createElement(z.a,{control:r.a.createElement(W.a,{checked:b,onClick:function(){return O((function(e){return!e}))},color:"primary"}),label:"Use my location"}):r.a.createElement(I.a,{onClick:function(){d()}},"Select a location using the map"),r.a.createElement(q.a,{container:!0,spacing:3},r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(X.a,{shrink:!0},"Date"),r.a.createElement(F.a,{utils:R.a,fullWidth:!0},r.a.createElement(L.a,{value:Y,fullWidth:!0,onChange:Q}))),r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(X.a,{shrink:!0},"Category"),r.a.createElement(V.a,{fullWidth:!0,defaultValue:"None",id:"grouped-select",value:B,onChange:function(e){P(e.target.value)}},function(){var e=[];return Object.entries(c).forEach((function(t){var a=Object(o.a)(t,2),n=a[0],l=a[1];e.push(r.a.createElement(Z.a,null,n)),l.forEach((function(t){return e.push(r.a.createElement(K.a,{value:t},t))}))})),e}())),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(U.a,{onChange:function(e){ae(e.target.value)},value:te,required:!0,id:"standard-textarea",label:"Item description",placeholder:"Description",multiline:!0,fullWidth:!0})),r.a.createElement(G,{width:"100%",handleChangeComplete:function(e,t){ce(e.hex)}})),r.a.createElement("div",{className:M.btns},r.a.createElement(I.a,{onClick:function(){if(te){var e=Object(E.a)({},y,{name:x,description:te,lostOrFoundAt:Y.toUTCString?Y.toUTCString():Y,color:le,labels:[B]});s(e,"/items/".concat(t)).then((function(){return f()})),a()}else u({msg:"Description is mandatory field!",type:"error"})}},"Submit"),r.a.createElement(I.a,{onClick:function(){a()}},"Cancel"))))},Ae=a(502),Me=a(516),Ie=a(509),Te=a(491),Be=a(492),Le=function(e){var t=e.pos,a=e.children,l=Object(n.useState)(!1),c=Object(o.a)(l,2),i=c[0],s=c[1],u=Object(n.useContext)(Ke).setBadgeCounts;return Object(n.useEffect)((function(){var e=setTimeout((function(){return s(!0)}),200*t);return u((function(e){return Object(E.a)({},e,{matches:0})})),function(){return clearTimeout(e)}}),[]),r.a.createElement("div",{className:"".concat(Q.defualt," ").concat(i?Q.animate:"")},a)},Fe=function(){var e=Object(n.useContext)(D),t=e.markers,a=e.setCenter,l=Object(n.useContext)(v).userDetails,c=function(){return t.filter((function(e){return e.reporter.id===l.googleId&&e.matches.length>0}))},o=function(e){return t.find((function(t){return t._id===e}))};return c().length?r.a.createElement("div",{className:Q.matches},r.a.createElement(Re,{pageName:"User Matches"}),c().map((function(e,t){return r.a.createElement(Le,{pos:t,key:t},r.a.createElement(Ie.a,{className:Q.matchPanel},r.a.createElement(Te.a,{expandIcon:r.a.createElement(be.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Q.flex},r.a.createElement(ze,{type:e.entryType}),r.a.createElement(De.a,{key:"sa",className:"".concat(Q.scoreLabel," ").concat(Q.matcheNo),label:"".concat(e.matches.length," POSSIBLE MATCHES")}),r.a.createElement(Pe,{labels:e.labels})))),r.a.createElement(Be.a,{style:{display:"block"}},r.a.createElement("div",{style:{marginBottom:"15px"}},r.a.createElement(me.a,{align:"left",variant:"h5"},"Entry description"),r.a.createElement(me.a,{align:"left"},e.description)),r.a.createElement(me.a,{align:"left",variant:"h5"},"Matches"),Object(p.a)(e.matches).sort((function(e,t){return e.score-t.score})).reverse().map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Q.matchContainer},r.a.createElement("div",{className:Q.matchLabels},r.a.createElement(De.a,{className:Q.scoreLabel,label:"MATCH SCORE: ".concat(e.score)}),r.a.createElement("a",{href:"mailto:".concat(o(e.matchedWithEntryId).reporter.email),className:Q.email},r.a.createElement(I.a,{align:"left",variant:"contained",color:"secondary"},"Contact reporter")),r.a.createElement(I.a,{align:"left",variant:"contained",color:"primary",onClick:function(){a(e.location)}},"Go to match")),r.a.createElement(me.a,{align:"left",style:{fontWeight:"bold",marginTop:"10px"}},"Reporter Email"),r.a.createElement(me.a,{align:"left"},o(e.matchedWithEntryId).reporter.email),r.a.createElement(me.a,{align:"left",style:{fontWeight:"bold",marginTop:"10px"}},"Match description"),r.a.createElement(me.a,{align:"left"},o(e.matchedWithEntryId)?o(e.matchedWithEntryId).description:"No Description"),r.a.createElement(me.a,{align:"left",style:{fontWeight:"bold",marginTop:"10px",marginBottom:"5px"}},"Match labels"),r.a.createElement(me.a,{align:"left"},r.a.createElement(Pe,{labels:o(e.matchedWithEntryId).labels}))),r.a.createElement(ne.a,null))})))))}))):r.a.createElement("div",{className:Q.matches},r.a.createElement(Re,{pageName:"User Matches"}),r.a.createElement(me.a,{align:"center",variant:"h3",style:{marginTop:"20px"}},"No Matches!"))},Pe=function(e){return e.labels.filter(Boolean).map((function(e){return r.a.createElement(De.a,{key:e,className:Q.l,label:e.toUpperCase()})}))},Ue=Object(ue.a)((function(e){return{root:{marginRight:"10px"}}})),We=function(e){var t=e.showAlert,a=Object(n.useContext)(D),l=a.markers,c=(a.setCenter,a.refreshMarkers),i=a.tileUrl,s=a.setTile,u=Object(n.useContext)(v).userDetails,m=Object(n.useState)({}),d=Object(o.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)({}),g=Object(o.a)(h,2),b=g[0],O=g[1],C=_("",{method:"delete",invokeManually:!0}).callApi,j=function(e){return function(){C({},"/items/".concat(e)).then((function(){c(),t({msg:"Successfully deleted ".concat(e),type:"success"})}))}},y=function(e){return function(){f[e]?p((function(t){return Object(E.a)({},t,Object(Y.a)({},e,!t[e]))})):p((function(t){return Object(E.a)({},t,Object(Y.a)({},e,!0))}))}},k=function(e){return f[e]},w=Ue();return console.log(i),r.a.createElement("div",null,r.a.createElement(Re,{pageName:"User settings"}),r.a.createElement("div",{className:Q.settingsPanel},r.a.createElement("div",{className:Q.userDetails},r.a.createElement(fe.a,{title:u.name},r.a.createElement(de.a,{className:Q.avatar},u.givenName[0]+u.familyName[0])),r.a.createElement(me.a,null,u.email)),r.a.createElement(ne.a,null),r.a.createElement(ne.a,null),r.a.createElement(le.a,null,r.a.createElement(ce.a,{button:!0,onClick:y("map_settings")},r.a.createElement(ie.a,null,r.a.createElement(Oe.a,null)),r.a.createElement(se.a,{primary:"Map Settings"}),k("map_settings")?r.a.createElement(he.a,null):r.a.createElement(be.a,null)),r.a.createElement(pe.a,{in:k("map_settings"),timeout:"auto",unmountOnExit:!0},r.a.createElement(le.a,{component:"div",disablePadding:!0},r.a.createElement(ce.a,null,r.a.createElement(Me.a,{value:i,onChange:function(e){s(e.target.value)}},S.map((function(e){return r.a.createElement(z.a,{value:e.url,control:r.a.createElement(Ae.a,null),label:(t=e.name,t[0].toUpperCase()+t.substring(1))});var t})))))),r.a.createElement(ce.a,{button:!0,onClick:y("manage_entries_settings")},r.a.createElement(ie.a,null,r.a.createElement(je.a,null)),r.a.createElement(se.a,{primary:"Manage User Entries"}),k("manage_entries_settings")?r.a.createElement(he.a,null):r.a.createElement(be.a,null)),r.a.createElement(pe.a,{in:k("manage_entries_settings"),timeout:"auto",unmountOnExit:!0},r.a.createElement(le.a,{component:"div",disablePadding:!0},l.filter((function(e){return e.reporter.id===u.googleId})).map((function(e){return r.a.createElement(ce.a,{button:!0},r.a.createElement(xe,{handleClose:function(){O(null)},id:e._id,isOpen:b===e._id,entryType:e.entryType}),r.a.createElement(ze,{type:e.entryType}),r.a.createElement(Pe,{labels:e.labels}),r.a.createElement(se.a,{primary:(a=e.description,a.length>45?a.slice(0,45)+"...":a)}),r.a.createElement(_e.a,{size:"small",color:"primary","aria-label":"edit",className:w.root,onClick:(t=e._id,function(){console.log(t),O(t)})},r.a.createElement(Se.a,null)),r.a.createElement(_e.a,{size:"small",color:"secondary","aria-label":"delete",onClick:j(e._id)},r.a.createElement(ke.a,null)));var t,a})))))))},ze=function(e){var t=e.type,a=void 0===t?"":t;return r.a.createElement(De.a,{className:"".concat(Q.chip," ").concat("found"===a?Q.found:""),label:a.toUpperCase(),color:"found"===a?"primary":"secondary"})},Re=function(e){var t=e.pageName,a=void 0===t?"":t;return r.a.createElement("div",{className:Q.title},r.a.createElement(me.a,{variant:"h5"},"LOST AND SPOTTINGS"),r.a.createElement(me.a,{style:{fontWeight:"bold"}},a))},He=[{value:"LOSTS",title:"losts",subtitle:"show only losts entries"},{value:"FOUNDS",title:"founds",subtitle:"show only founds entries"},{value:"USER_ENTRIES",title:"my entries",subtitle:"show only entries reported by me"}],Ge=r.a.memo((function(){var e=r.a.useContext(Ke),t=e.incBadgeCount,a=e.decBadgeCount,n=e.filterState,l=e.setFilterState,c=r.a.useContext(v),i=c.userDetails,s=c.labels,u=r.a.useContext(D).setMarkers,m=r.a.useState(n.toggels||{}),d=Object(o.a)(m,2),f=d[0],h=d[1],b=r.a.useState(n.activeLabels||[]),O=Object(o.a)(b,2),C=O[0],j=O[1],_=r.a.useState(n.range||15),y=Object(o.a)(_,2),k=y[0],w=y[1];r.a.useEffect((function(){n.toggels&&Object.keys(n.toggels)>Object.keys(f)&&a("filter"),n.toggels&&Object.keys(n.toggels)<Object.keys(f)&&t("filter"),l((function(e){return Object(E.a)({},e,{toggels:f})}))}),[f]),r.a.useEffect((function(){n.activeLabels&&n.activeLabels.length>C.length&&0===C.length&&a("filter"),n.activeLabels&&n.activeLabels.length<C.length&&1===C.length&&(console.log("shit"),t("filter")),l((function(e){return Object(E.a)({},e,{activeLabels:C})}))}),[C]),r.a.useEffect((function(){l((function(e){return Object(E.a)({},e,{range:k})}))}),[k]);var S=r.a.useRef(ae()((function(e){g.a.get("".concat("https://school-lost-and-found-app.herokuapp.com","/items").concat(e)).then((function(e){var t=e.data;u(t)}))}),300)).current;return r.a.useEffect((function(){S(function(){var e=Object.entries(f).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1]})).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return"".concat(a.toLowerCase(),"=").concat(n)})).join("&"),t=C.length?"labels=".concat(C.join(",")):"";return"?range=".concat(k,"&").concat(e).concat(t?"&".concat(t):"")}())}),[f,C,k]),r.a.createElement("div",{className:ee.filtersCon},r.a.createElement(Re,{pageName:"Filters"}),r.a.createElement(le.a,{className:"slide-filter-bar"},r.a.createElement(Z.a,null,"Range Selector (radius in km)"),r.a.createElement(ce.a,null,r.a.createElement(oe.a,{value:k,min:0,step:.1,max:200,valueLabelFormat:function(e){return e},scale:function(e){return Math.pow(e,10)},onChange:function(e,t){return w(t)},valueLabelDisplay:"auto","aria-labelledby":"non-linear-slider"})),r.a.createElement(Z.a,null,"Toggle Filters"),He.map((function(e){var t=e.title,a=e.subtitle,n=e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{dense:!0,button:!0},r.a.createElement(ie.a,null,r.a.createElement(W.a,{edge:"start",checked:f[n],disableRipple:!0,onChange:function(){if("USER_ENTRIES"===n)return f[n]?void h((function(e){return Object(E.a)({},e,Object(Y.a)({},n,!e[n]&&i.googleId))})):void h((function(e){return Object(E.a)({},e,Object(Y.a)({},n,i.googleId))}));f[n]?h((function(e){return Object(E.a)({},e,Object(Y.a)({},n,!e[n]))})):h((function(e){return Object(E.a)({},e,Object(Y.a)({},n,!0))}))}})),r.a.createElement(se.a,{primary:t,secondary:a})),r.a.createElement(ne.a,null))})),r.a.createElement(Z.a,null,"Categories"),r.a.createElement(ce.a,null,r.a.createElement(re.a,{multiple:!0,className:ee.autocomplete,id:"tags-outlined",onChange:function(e,t){return j(t.map((function(e){return e.title})))},value:C.map((function(e){return{title:e}})),options:Object.values(s).reduce((function(e,t){return[].concat(Object(p.a)(e),Object(p.a)(t))}),[]).map((function(e){return{title:e}})),getOptionLabel:function(e){return e.title},filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(U.a,Object.assign({},e,{variant:"outlined",label:"filterSelectedOptions",placeholder:"categories"}))}})),r.a.createElement(Z.a,null,"Colors"),r.a.createElement(ce.a,null,r.a.createElement(G,null))))}),(function(){return!0})),Je="FILTER",qe="MATCH",Ve="SETTINGS",Ke=Object(n.createContext)({}),Ze=function(e){var t,a=e.showAlert,l=Object(n.useContext)(Ke),c=l.openDrawer,o=l.setOpenDrawer,i=(t={},Object(Y.a)(t,Je,(function(){return r.a.createElement(Ge,{showAlert:a})})),Object(Y.a)(t,qe,(function(){return r.a.createElement(Fe,{showAlert:a})})),Object(Y.a)(t,Ve,(function(){return r.a.createElement(We,{showAlert:a})})),t);return r.a.createElement($.a,{anchor:"left",open:!!c,onClose:function(){return o("")}},i[c]?i[c]():"")},Xe=(a(429),function(e){var t=e.showAlert,a=Object(n.useState)(null),l=Object(o.a)(a,2),c=l[0],i=l[1];return r.a.createElement("div",{className:M.actionsBar},r.a.createElement(Qe,{showAlert:t,isOpen:"found"===c,handleClose:function(){return i(null)}}),r.a.createElement($e,{showAlert:t,isOpen:"lost"===c,handleClose:function(){return i(null)}}),r.a.createElement(J,{text:"found",clickHandler:function(){return i("found")}}," "),r.a.createElement(J,{text:"lost",clickHandler:function(){return i("lost")}}," "))}),Ye=function(e){var t=e.isOpen,a=e.handleClose,n=e.children,l=void 0===n?"":n;return r.a.createElement(T.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,className:M.modal,onClose:a,closeAfterTransition:!0,BackdropComponent:B.a,BackdropProps:{timeout:500}},r.a.createElement(P.a,{in:t},l))},Qe=function(e){var t=e.isOpen,a=e.handleClose,n=e.showAlert;return r.a.createElement(Ye,{isOpen:t,handleClose:a},r.a.createElement(et,{showAlert:n,title:"Found Something",entryType:"found",handleClose:a}))},$e=function(e){var t=e.isOpen,a=e.handleClose,n=e.showAlert;return r.a.createElement(Ye,{isOpen:t,handleClose:a},r.a.createElement(et,{showAlert:n,title:"Lost Something",entryType:"lost",handleClose:a}))},et=function(e){var t=e.entryType,a=e.handleClose,l=e.title,c=e.showAlert,i=Object(n.useContext)(v).labels,s=Object(n.useContext)(D),u=s.enableDraggableMarker,m=s.disableDraggableMarker,d=s.addMarker,f=s.initialPosition,p=s.draggableMarkerPosition,h=Object(n.useState)(!p),g=Object(o.a)(h,2),b=g[0],O=g[1],C=r.a.useContext(Ke).setBadgeCounts,j=r.a.useState(""),_=Object(o.a)(j,2),y=_[0],k=_[1],w=r.a.useState(""),S=Object(o.a)(w,2),x=S[0],N=S[1],A=Object(n.useState)(new Date),T=Object(o.a)(A,2),B=T[0],P=T[1],H=r.a.useState(""),J=Object(o.a)(H,2),Y=J[0],Q=J[1],$=r.a.useState(""),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=function(){Q(""),k(""),m()};return r.a.createElement("div",{className:M.modalContent},r.a.createElement("h2",null,l),r.a.createElement("form",{className:M.form,noValidate:!0,autoComplete:"off"},b?r.a.createElement(z.a,{control:r.a.createElement(W.a,{checked:b,onClick:function(){return O((function(e){return!e}))},color:"primary"}),label:"Use my location"}):r.a.createElement(I.a,{onClick:function(){u(),a()}},"Select a location using the map"),r.a.createElement(q.a,{container:!0,spacing:3},r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(X.a,{shrink:!0},"Date"),r.a.createElement(F.a,{utils:R.a,fullWidth:!0},r.a.createElement(L.a,{value:B,fullWidth:!0,onChange:P}))),r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(X.a,{shrink:!0},"Category"),r.a.createElement(V.a,{fullWidth:!0,defaultValue:"None",id:"grouped-select",value:x,onChange:function(e){N(e.target.value)}},function(){var e=[];return Object.entries(i).forEach((function(t){var a=Object(o.a)(t,2),n=a[0],l=a[1];e.push(r.a.createElement(Z.a,null,n)),l.forEach((function(t){return e.push(r.a.createElement(K.a,{value:t},t))}))})),e}())),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(U.a,{onChange:function(e){Q(e.target.value)},value:Y,required:!0,id:"standard-textarea",label:"Item description",placeholder:"Description",multiline:!0,fullWidth:!0})),r.a.createElement(G,{width:"100%",handleChangeComplete:function(e,t){ae(e.hex)}})),r.a.createElement("div",{className:M.btns},r.a.createElement(I.a,{onClick:function(){Y?(d({name:y,description:Y,entryType:t,location:b?f:[p.lat,p.lng],lostOrFoundAt:B.toUTCString(),color:te,labels:[x||"other"]}).then((function(e){var t=e.matches.length;t&&C((function(e){return Object(E.a)({},e,{matches:e.matches||0+t})})),c({msg:"Entry created successfully!\n".concat(t?"your entry has ".concat(t," possible matches"):""),entryType:"success"})})),ne(),a()):c({msg:"Description is mandatory field!",type:"error"})}},"Submit"),r.a.createElement(I.a,{onClick:function(){ne(),a()}},"Cancel"))))},tt=a(505),at=a(503),nt=(a(430),a(206)),rt=a.n(nt),lt=a(498),ct=function(){var e=n.useContext(v),t=e.userDetails,a=e.setUserDetails,r=Object(x.g)();return t.name?n.createElement(x.a,{to:"/map"}):n.createElement("div",{className:"wrapper fadeIn"},n.createElement("div",{id:"formContent"},n.createElement("h2",{className:"active"}," LOST AND SPOTTINGS - Sign In "),n.createElement("form",null,n.createElement(lt.a,{maxWidth:"sm"},n.createElement("p",null,"Login via your google account"),n.createElement(rt.a,{clientId:"1034938527427-ka0dtgorj5rgot11oofffp7l5v74rp9c.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(e){a(e.profileObj),r.push("/map")},onFailure:console.error,cookiePolicy:"single_host_origin",render:function(e){return n.createElement("button",{type:"button",className:"google-button",onClick:e.onClick,disabled:e.disabled},n.createElement("span",{className:"google-button__icon"},n.createElement("svg",{viewBox:"0 0 366 372",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z",id:"Shape",fill:"#EA4335"}),n.createElement("path",{d:"M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z",id:"Shape",fill:"#FBBC05"}),n.createElement("path",{d:"M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z",id:"Shape",fill:"#4285F4"}),n.createElement("path",{d:"M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z",fill:"#34A853"}))),n.createElement("span",{className:"google-button__text"},"Sign in with Google"))}})))),n.createElement("ul",{class:"circles"},n.createElement("li",null),n.createElement("li",null),n.createElement("li",null),n.createElement("li",null),n.createElement("li",null),n.createElement("li",null),n.createElement("li",null),n.createElement("li",null),n.createElement("li",null),n.createElement("li",null)))},ot=a(88),it=a(499),st=a(208),ut=a.n(st),mt=a(207),dt=a.n(mt),ft=a(209),pt=a.n(ft),Et=function(){var e=n.useContext(Ke),t=e.setOpenDrawer,a=e.badgeCount;return n.createElement("div",{className:ot.badgesContaier},n.createElement(it.a,{color:"primary",badgeContent:a.filter,className:ot.item},n.createElement(dt.a,{color:"action",onClick:function(){t(Je)}})),n.createElement(it.a,{color:"secondary",className:ot.item,badgeContent:a.matches},n.createElement(ut.a,{color:"action",onClick:function(){t(qe)}})),n.createElement(it.a,{color:"secondary",className:ot.item,onClick:function(){t(Ve)}},n.createElement(pt.a,{color:"action"})))};function ht(e){return r.a.createElement(at.a,Object.assign({elevation:6,variant:"filled"},e))}function gt(e){var t=e.open,a=e.setOpen,n=function(e,t){"clickaway"!==t&&a({msg:null})};return r.a.createElement("div",null,r.a.createElement(tt.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:null!==t.msg,autoHideDuration:6e3,onClose:n},r.a.createElement(ht,{onClose:n,severity:t.type},t.msg)))}var bt=r.a.createContext({showAlert:function(){}}),vt=function(e){var t=e.children,a=e.showAlert;return r.a.createElement(bt.Provider,{value:{showAlert:a}},t)};var Ot=function(){var e=r.a.useState({msg:null}),t=Object(o.a)(e,2),a=t[0],n=t[1];return r.a.createElement(x.d,null,r.a.createElement(x.b,{exact:!0,path:"/map",render:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(vt,{showAlert:n},r.a.createElement(Et,null),r.a.createElement(Ze,{showAlert:n}),r.a.createElement(gt,{open:a,setOpen:n}),r.a.createElement(Xe,{showAlert:n}),r.a.createElement(N,null)))}}),r.a.createElement(x.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ct,null)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ct=a(86);c.a.render(r.a.createElement(Ct.a,{basename:"/"},r.a.createElement((function(e){var t=e.children,a=Object(n.useState)(""),l=Object(o.a)(a,2),c=l[0],i=l[1],s=Object(n.useState)({}),u=Object(o.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)({}),p=Object(o.a)(f,2),h=p[0],g=p[1];return r.a.createElement(Ke.Provider,{value:{openDrawer:c,setOpenDrawer:i,incBadgeCount:function(e){d((function(t){return t[e]?Object(E.a)({},t,Object(Y.a)({},e,t[e]+1)):Object(E.a)({},t,Object(Y.a)({},e,1))}))},setBadgeCounts:d,decBadgeCount:function(e){d((function(t){return t[e]&&t[e]>0?Object(E.a)({},t,Object(Y.a)({},e,t[e]-1)):Object(E.a)({},t,Object(Y.a)({},e,0))}))},badgeCount:m,filterState:h,setFilterState:g}},t)}),null,r.a.createElement((function(e){var t=e.children,a=b("LAF-user-details",{}),r=Object(o.a)(a,2),l=r[0],c=r[1],i=_("/labels",{initialData:{}}).data;return n.createElement(v.Provider,{value:{userDetails:l,setUserDetails:c,labels:i}},t)}),null,r.a.createElement((function(e){var t=e.children,a=Object(n.useState)([0,0]),l=Object(o.a)(a,2),c=l[0],i=l[1],s=Object(n.useState)(S[0].url),u=Object(o.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)(null),E=Object(o.a)(f,2),h=E[0],g=E[1],b=Object(n.useState)(null),v=Object(o.a)(b,2),O=v[0],C=v[1],j=_("/items",{initialData:[]}),y=j.data,k=j.setData,w=j.callApi;Object(n.useEffect)((function(){var e=setInterval((function(){w().then((function(e){var t=e.data.filter((function(e){return!y.some((function(t){return t._id===e._id}))}));t.length&&k((function(e){return[].concat(Object(p.a)(e),Object(p.a)(t))}))}))}),7e3);return function(){return clearInterval(e)}}),[y]);var x=_("/items",{method:"post",invokeManually:!0}).callApi,N=Object(n.useRef)();Object(n.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;i([a,n])}))}),[]);return r.a.createElement(D.Provider,{value:{initialPosition:c,setInitialPosition:i,markers:y,addMarker:function(e){return x({item:e}).then((function(e){var t=e.data;return t&&k((function(e){return[].concat(Object(p.a)(e),[t])})),t}))},setMarkers:k,removeMarker:function(e){k((function(t){return t.filter((function(t){return t.id!==e}))}))},enableDraggableMarker:function(){var e=Object(o.a)(c,2),t=e[0],a=e[1];g([t+.01,a+.01])},draggableMarkerPosition:h,updateDraggableMarker:function(e){var t=N.current;null!=t&&g(t.leafletElement.getLatLng())},refmarker:N,disableDraggableMarker:function(){g(null)},setCenter:C,center:O,refreshMarkers:function(){return w().then((function(e){var t=e.data;k(t)}))},tileUrl:m,setTile:d}},t)}),null,r.a.createElement(Ot,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e,t,a){e.exports={map:"Map_map__UaOG-",dragMarker:"Map_dragMarker__2Hw5T","leaflet-popup-content":"Map_leaflet-popup-content__2a02W",popoverContainer:"Map_popoverContainer__LyS8E",descriptionItem:"Map_descriptionItem__2GBYn",informationItem:"Map_informationItem__2ev6Z",colorItem:"Map_colorItem__3K-oD"}},88:function(e,t,a){e.exports={badgesContaier:"TopBadges_badgesContaier__k2oRs",item:"TopBadges_item__1dlHs"}}},[[237,1,2]]]);
//# sourceMappingURL=main.d1fa4a95.chunk.js.map